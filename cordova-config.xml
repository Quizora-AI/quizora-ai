
<?xml version='1.0' encoding='utf-8'?>
<widget id="com.quizora.ai" version="1.0.0" xmlns="http://www.w3.org/ns/widgets" xmlns:cdv="http://cordova.apache.org/ns/1.0" xmlns:android="http://schemas.android.com/apk/res/android">
    <name>Quizora AI</name>
    <description>AI-powered quiz and flashcard generator</description>
    <author email="support@quizora.com" href="https://quizora.com">Quizora Team</author>
    <content src="index.html" />
    
    <preference name="Orientation" value="default" />
    <preference name="DisallowOverscroll" value="true" />
    <preference name="BackgroundColor" value="0xffffffff" />
    <preference name="SplashScreenDelay" value="0" />
    
    <platform name="android">
        <!-- Explicitly add billing permission to manifest -->
        <edit-config file="app/src/main/AndroidManifest.xml" mode="merge" target="/manifest">
            <manifest xmlns:android="http://schemas.android.com/apk/res/android">
                <uses-permission android:name="com.android.vending.BILLING" />
                <uses-permission android:name="android.permission.INTERNET" />
            </manifest>
        </edit-config>
        
        <!-- Update to latest billing library version -->
        <framework src="com.android.billingclient:billing:7.1.1" />
        
        <!-- Add Play Billing metadata -->
        <config-file target="AndroidManifest.xml" parent="/manifest/application">
            <meta-data android:name="com.google.android.play.billingclient.version" android:value="7.1.1" />
        </config-file>
        
        <!-- Include our custom plugin -->
        <source-file src="src/android/PlayBillingPlugin.kt" target-dir="app/src/main/java/com/quizora/ai/billing" />
    </platform>
    
    <!-- Use our custom plugin instead of the standard one -->
    <plugin name="cordova-plugin-play-billing" src="src/android" />
    
    <!-- Define subscription products -->
    <product id="monthly_subscription" type="subscription">
        <title>Monthly Premium</title>
        <description>Monthly Premium Subscription</description>
        <!-- Add Google Play specific fields -->
        <android-manifest>
            <subscription>
                <duration>P1M</duration>
                <billingPeriod>P1M</billingPeriod>
            </subscription>
        </android-manifest>
    </product>
    <product id="yearly_subscription" type="subscription">
        <title>Annual Premium</title>
        <description>Annual Premium Subscription</description>
        <!-- Add Google Play specific fields -->
        <android-manifest>
            <subscription>
                <duration>P1Y</duration>
                <billingPeriod>P1Y</billingPeriod>
            </subscription>
        </android-manifest>
    </product>
</widget>
